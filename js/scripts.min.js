$(document).ready(function(){function r(e,t){var n=new Array;var r=e.length;var i=+$("#nCons").val()+ +$("#nVars").val()+1;for(var s=0;s<i;s++){var o=0;var u=true;var a=0;for(var f=0;f<r;f++){var l=e[f];if(o>1)break;if(l[s]>0){o++;a=f;if(l[s]!=1)u=false}}if(o==1&&u){var l=e[a];n.push(l[l.length-1])}else n.push(0)}if(!t){var c=new Array;for(var f=0;f<e[0].length;f++){c.push(e[e.length-1][f])}return c}return n}function i(e,t){var n='<br/><table class="pure-table pure-table-bordered"><thead><tr>';var r=+$("#nVars").val();var i=+$("#nCons").val();if(t){for(var s=0;s<r;s++){n+="<th>X"+(s+1)+"</th>"}for(var s=0;s<i;s++){n+="<th>S"+(s+1)+"</th>"}n+="<th>Z</th><th>Answer</th></tr></thead>"}else{for(var s=0;s<i;s++){n+="<th>Y"+(s+1)+"</th>"}for(var s=0;s<r;s++){n+="<th>S"+(s+1)+"</th>"}n+="<th>b</th></tr></thead>"}for(var s=0;s<e.length;s++){var o=e[s];if(s%2==0)n+='<tr class="pure-table-odd">';else n+="<tr>";for(var u=0;u<o.length;u++){n+="<td>"+Math.ceil(o[u]*1e4)/1e4+"</td>"}n+="</tr>"}n+="</table>";$("#printtable").append(n)}function s(e,t){var n='<p>Basic Solution:</p><table class="pure-table pure-table-bordered"><thead><tr>';var r=0;if(t){var i=+$("#nVars").val();var s=+$("#nCons").val();for(var o=0;o<i;o++){n+="<th>X"+(o+1)+"</th>"}for(var o=0;o<s;o++){n+="<th>S"+(o+1)+"</th>"}n+="<th>Z</th></tr></thead><tr>";for(var o=0;o<i;o++){n+="<td>"+Math.ceil(e[r++]*1e4)/1e4+"</td>"}for(var o=0;o<s;o++){n+="<td>"+Math.ceil(e[r++]*1e4)/1e4+"</td>"}n+="<td> "+Math.ceil(e[r]*1e4)/1e4+"</td>";n+="</tr></table>"}else{var i=+$("#nVars").val();var s=+$("#nCons").val();for(var o=0;o<s;o++){r++}for(var o=0;o<i;o++){n+="<th>X"+(o+1)+"</th>"}n+="<th>Z</th></tr></thead><tr>";for(var o=0;o<i;o++){n+="<td>"+Math.ceil(e[r++]*1e4)/1e4+"</td>"}n+="<td>"+Math.ceil(e[r]*1e4)/1e4+"</td>";n+="</tr></table>"}n+="<hr/>";$("#printtable").append(n)}function o(e,t){var n=new Array;for(var r=0;r<e;r++){var i=new Array;var s=0;for(var o=0;o<t;o++){var u="#equals"+r;var a=$(u).val();var f="#vars"+r+"-"+o;var l=+$(f).val();if(!isNaN(l)){i.push(l)}else if(isNaN(l)){if(s==r){if(a=="lessthan")i.push(1);else if(a=="greaterthan")i.push(-1)}else{i.push(0)}s++}}n.push(i)}var i=new Array;for(var o=0;o<t;o++){var f="#vars"+o;var l=+$(f).val();if(!isNaN(l)){l=-l;i.push(l)}else if(isNaN(l)){if(o==t-2){i.push(1)}else{i.push(0)}}}n.push(i);return n}function u(e,t){var n=new Array;for(var r=0;r<e;r++){var i=new Array;var s=0;for(var o=0;o<t;o++){var u="#equals"+r;var a=$(u).val();var f="#vars"+r+"-"+o;var l=+$(f).val();if(!isNaN(l)){i.push(l)}}n.push(i)}var i=new Array;for(var o=0;o<t;o++){var f="#vars"+o;var l=+$(f).val();if(!isNaN(l)){i.push(l)}else if(isNaN(l)){if(o==t-1){i.push(0)}}}n.push(i);var c=g(n);var h=c.length-1;var p=new Array;for(var r=0;r<c.length-1;r++){var i=new Array;for(var o=0;o<c[r].length-1;o++){i.push(c[r][o])}for(var o=0;o<h;o++){if(o==r)i.push(1);else i.push(0)}i.push(c[r][c[r].length-1]);p.push(i);console.log("withSlack: "+i)}var d=new Array;for(var o=0;o<c[0].length-1;o++){d.push(-c[c.length-1][o])}for(var o=0;o<h+1;o++){d.push(0)}p.push(d);console.log("withSlack: "+d);return p}function a(e,t){var n=0;var o=e.length;for(;n<100;n++){if(l(e[o-1])==true){notif({msg:"<b>Success:</b> Optimization is finished!",type:"success"});break}else{var u=c(e[o-1]);var a=h(e,u);console.log("row: "+a+" col: "+u);e=p(e,a,u);$("#printtable").append("<h4>Iteration "+(n+1)+"</h4>");i(e,t);s(r(e,t),t)}}if(n==100){notif({msg:"<b>Oops!</b> Optimization is not Feasible!",type:"error",position:"center"})}}function f(e,t,n,r){var i=0;var t=e.length;for(;i<100;i++){if(l(e[t-1])==true){notif({msg:"<b>Success:</b> Optimization is finished!",type:"success"});y(e,t,n,r);break}else{var s=c(e[t-1]);var o=h(e,s);e=p(e,o,s)}}if(i==100){notif({msg:"<b>Oops!</b> Optimization is not Feasible!",type:"error",position:"center"})}}function l(e){for(var t=0;t<e.length-1;t++){if(e[t]<0)return false}return true}function c(e){var t=0;for(var n=0;n<e.length-1;n++){if(e[n]<e[t])t=n}return t}function h(e,t){var n=new Array;for(var r=0;r<e.length;r++){var i=e[r];if(i[t]>0)n.push(i[i.length-1]/i[t]);else n.push(-1)}var s=0;for(var r=0;r<n.length;r++){if(n[r]>=0){if(n[r]<n[s])s=r;if(n[s]==-1)s=r}}return s}function p(e,t,n){var r=d(e[t],e[t][n]);for(var i=0;i<e.length;i++){var s=[];for(var o=0;o<r.length;o++){s.push(r[o])}if(i!=t){var u=e[i][n];var a=v(s,u);e[i]=m(e[i],a)}else if(i==t){e[i]=s}}return e}function d(e,t){var n=e.length;for(var r=0;r<n;r++){e[r]=e[r]/t}return e}function v(e,t){for(var n=0;n<e.length;n++){e[n]=t*e[n]}return e}function m(e,t){for(var n=0;n<e.length;n++){e[n]=e[n]-t[n]}return e}function g(e){var t=new Array;for(var n=0;n<e[0].length;n++){var r=new Array;for(var i=0;i<e.length;i++){r.push(e[i][n])}t.push(r)}return t}function y(e,t,n,r){var i="<h1>The Optimized Menu</h1><h4>The cost of this optimal diet is $"+Math.ceil(e[t-1][3*t+21]*1e4)/1e4+' per day.</h4><br/><table class="pure-table pure-table-bordered"><thead><tr><th>Food</th><th>Servings</th><th>Cost ($)</th></tr></thead>';var s=0;for(var o=2*t+22,u=0;o<3*t+21;o++,u++){if(e[t-1][o-1]!=0){if(s%2==0){var a=r[u]*e[t-1][o-1];i+='<tr class="pure-table-odd"><td>'+n[u]+"</td><td>"+Math.ceil(e[t-1][o-1]*1e4)/1e4+"</td><td>"+Math.ceil(a*1e4)/1e4+"</td></tr>"}else{var a=r[u]*e[t-1][o-1];i+="<tr><td>"+n[u]+"</td><td>"+Math.ceil(e[t-1][o-1]*1e4)/1e4+"</td><td>"+Math.ceil(a*1e4)/1e4+"</td></tr>"}s++}}i+="</table>";$("#printdietTable").append(i)}$("#dietsolver").hide();$("#functions").hide();$("#tableau").hide();$(".dietresult").hide();$("#simplexButton").on("click",function(){$("#simplexsolver").slideDown();$("#dietsolver").slideUp()});$("#dietButton").on("click",function(){$("#simplexsolver").slideUp();$("#dietsolver").slideDown()});var e;var t=new Array(64);for(var n=0;n<64;n++){t[n]=new Array}$.get("data/nutritional_values.txt",function(n){e=n.split("\n");for(var r=0;r<e.length;r++){e[r]=e[r].split(",");for(var i=0;i<e[r].length;i++){var s=e[r][i].toString(e[r][i]);t[r].push(s)}}$.sessionStorage.set("myList",t);var o='<td><input name="foods" type="checkbox" id="';var u='"/><label for="';var a="";for(var r=1;r<=e.length;r++){var f="food";f=f.concat(r);a+=o+f+'"value="'+e[r-1][0]+u+f+'">'+e[r-1][0]+"</label></td>";if(r%4==0){var l="<tr>"+a+"</tr>";var c=$(l);$("#dietvars").append(c);a=""}}});$(".nextstep").on("click",function(){var e=$("#nVars").val();var t=+$("#nVars").val();if(e==""||e<=0){notif({msg:"<b>Oops!</b> Invalid number of variables.",type:"error",position:"center"});return}e=$("#nCons").val();var n=+$("#nCons").val();if(e==""||e<=0){notif({msg:"<b>Oops!</b> Invalid number of constraints.",type:"error",position:"center"});return}$(".simplexvars").hide();$("#functions").show();var e="";for(var r=0;r<t;r++){if(r==t-1)e+='<input type="number"  step="any" class="pure-u-1-8" id="vars'+r+'"/><button class="pure-button-disabled">X'+(r+1)+"</button>";else e+='<input type="number" step="any" class="pure-u-1-8" id="vars'+r+'"/><button class="pure-button-disabled">X'+(r+1)+"+</button>"}$("#varsNCons").append(e);e="";for(var i=0;i<n;i++){for(var r=0;r<=t;r++){if(r==t)e+='<select class="btn btn-default" id="equals'+i+'" name="equals"><option value="lessthan" ><=</option><option value="greaterthan">>=</option></select>'+'<input type="number" step="any" class="pure-u-1-8" id="vars'+i+"-"+(r+n+1)+'"/>';else if(r==t-1)e+='<input step="any" type="number" class="pure-u-1-8" id="vars'+i+"-"+r+'"/><button class="pure-button-disabled">X'+(r+1)+"</button>";else e+='<input step="any" type="number" class="pure-u-1-8" id="vars'+i+"-"+r+'"/><button class="pure-button-disabled">X'+(r+1)+"+</button>"}e+="<br/>"}$("#consNCons").append(e)});$(".backstep").on("click",function(){$("#varsNCons").children().remove();$("#consNCons").children().remove();$("#functions").hide();$(".simplexvars").show()});$(".backstep2").on("click",function(){$("#functions").show();$("#tableau").hide();$("#printtable").children().remove()});$(".simplexsolve").on("click",function(){$("#functions").hide();$("#tableau").show();var e=$("input[name='category']:checked").val();var t=+$("#nVars").val();var n=+$("#nCons").val();var f=n+1;var l=t+n+2;if(e=="max"){var c=o(n,l);i(c,true);var h=r(c,true);s(h,true);a(c,true)}else if(e=="min"){var c=u(n,l);i(c,false);var h=r(c,true);s(h,false);a(c,false)}});$(".select-all").on("click",function(){$(":checkbox").each(function(){this.checked=true})});$(".deselect-all").on("click",function(){$(":checkbox").each(function(){this.checked=false})});$(".backstep3").on("click",function(){$(".dietresult").hide();$(".foodtable").show();$("#printdietTable").children().remove()});$(".dietsolve").on("click",function(){$(".dietresult").show();$(".foodtable").hide();var e=$.sessionStorage.get("myList");var t=new Array(11);var n=new Array(11);var r=new Array;var i=new Array;var s=0;var o=new Array(2e3,0,0,0,0,25,50,5e3,50,800,10);var u=new Array(2250,300,65,2400,300,100,100,5e4,2e4,1600,30);for(var a=0;a<11;a++){n[a]=new Array;t[a]=new Array}for(var a=1;a<=64;a++){var l="input[id='food"+a+"']:checked";var c=$(l).val();if(c!=undefined){s++;r.push(e[a-1][0]);i.push(e[a-1][1]);for(var h=0,p=3;h<11;h++,p++){n[h].push(-e[a-1][p]);t[h].push(e[a-1][p])}}}for(var h=0;h<11;h++){n[h].push(-u[h]);t[h].push(o[h])}var d=t.concat(n);var v=new Array(s);for(var a=0;a<s;a++){v[a]=new Array;var p=a;for(var h=0;h<s+1;h++){if(p==h)v[a].push(1);else v[a].push(0)}}d=d.concat(v);for(var a=0;a<s;a++){v[a]=new Array;var p=a;for(var h=0;h<s+1;h++){if(p==h)v[a].push(-1);else{if(h==s)v[a].push(-10);else v[a].push(0)}}}d=d.concat(v);var m=new Array(s+1);for(var a=0;a<s+1;a++){if(a!=s)m[a]=i[a];else m[a]=0}d.push(m);var y=g(d);for(var a=0;a<y[0].length;a++)y[y.length-1][a]=-y[y.length-1][a];for(var a=0;a<y.length;a++){var p=a;for(var h=0;h<s+1;h++){if(p==h)y[a].push(1);else y[a].push(0)}}for(var a=0;a<s+1;a++){if(a!=s)y[a].push(i[a]);else y[a].push(0)}f(y,s,r,i)})})